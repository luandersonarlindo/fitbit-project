# ğŸ“‹ RESUMO TÃ‰CNICO DOS ARQUIVOS (Atualizado)

> **ğŸ“š DocumentaÃ§Ã£o Completa**: Veja o [README.md](README.md) para informaÃ§Ãµes detalhadas sobre instalaÃ§Ã£o, uso e arquitetura.

## ğŸ¯ Arquivos Principais

### ğŸ–¥ï¸ `app.py` - Interface Streamlit
**Funcionalidades:**
- Interface web interativa para o projeto
- OpÃ§Ã£o 1: **Treinar modelo** - Pipeline completo de ETL + ML
- OpÃ§Ã£o 2: **Usar modelo salvo** - PrediÃ§Ãµes com modelo existente
- VisualizaÃ§Ã£o de mÃ©tricas (RÂ², MAE, MAPE) e estatÃ­sticas
- InteraÃ§Ã£o com **chatbot** para perguntas sobre previsÃµes e top features
- Tratamento robusto de erros (PermissionError, modelo inexistente)

### âš™ï¸ `main_app.py` - Pipeline CLI
**Funcionalidades:**
- ExecuÃ§Ã£o via linha de comando sem interface grÃ¡fica
- Pipeline automatizado: DB â†’ ETL â†’ Treinamento â†’ Salvar modelo
- Retorna caminho do modelo + mÃ©tricas de performance
- Ideal para automaÃ§Ã£o, testes e integraÃ§Ã£o

## ğŸ—‚ï¸ MÃ³dulos Core

### ğŸ—„ï¸ `core/db.py` - GestÃ£o de Database
**Funcionalidades:**
- `create_database()`: Cria SQLite com tratamento de PermissionError
- `exec_sql_files()`: Executa scripts SQL automaticamente
- GestÃ£o robusta de conexÃµes e cleanup

### ğŸ”„ `core/etl.py` - Pipeline ETL
**Funcionalidades:**
- `load_csv_to_sor()`: IngestÃ£o de dados brutos do CSV
- `transform_to_sot()`: Limpeza e padronizaÃ§Ã£o (SOR â†’ SOT)  
- `transform_to_spec()`: Feature engineering (SOT â†’ SPEC)
- ConversÃ£o de datas, criaÃ§Ã£o de variÃ¡veis derivadas, rolling averages, lags e indicadores de fim de semana

### ğŸ¤– `core/train.py` - Machine Learning
**Funcionalidades:**
- `train_and_save()`: Treinamento de modelos: RegressÃ£o Linear, RandomForest, XGBoost (opcional)
- Split treino/validaÃ§Ã£o/teste (ex.: 70/15/15 ou 80/20)
- CÃ¡lculo de mÃ©tricas: RÂ², MAE, MAPE, erro percentual dentro de thresholds
- SerializaÃ§Ã£o do modelo (`.pickle`) com metadados de versÃ£o

### ğŸ”® `core/predict.py` - PrediÃ§Ãµes
**Funcionalidades:**
- `predict_from_pickle()`: Carrega modelo salvo
- AplicaÃ§Ã£o de prediÃ§Ãµes em DataFrames
- Tratamento de valores ausentes (fillna)
- Permite inferÃªncia individual ou em lote

### ğŸ’¬ `core/chatbot.py` - InteraÃ§Ã£o com UsuÃ¡rio
**Funcionalidades:**
- Responde perguntas sobre mÃ©tricas, top features e prediÃ§Ãµes
- Suporte a queries como:
  - "Quais as top 5 features?"
  - "Qual a previsÃ£o de calorias para o usuÃ¡rio X no dia Y?"
- Baseado em leitura de modelo, coeficientes e templates predefinidos

### ğŸ” `core/explain.py` - Explicabilidade
**Funcionalidades:**
- CÃ¡lculo de importÃ¢ncia das features
- Suporte a SHAP e permutaÃ§Ãµes
- GeraÃ§Ã£o de grÃ¡ficos para visualizaÃ§Ã£o de contribuiÃ§Ã£o das features

## ğŸ“Š Dados e Schemas

### ğŸ“ `core/data/*.sql` - DefiniÃ§Ãµes de Tabelas
- `sor_daily_activity.sql`: Schema para dados brutos
- `sot_daily_activity.sql`: Schema para dados tratados  
- `spec_activity_features.sql`: Schema para features de ML

### ğŸ“ˆ `dailyActivity_merged.csv` - Dataset
- Dados originais de atividades do Fitbit
- ~940 registros de usuÃ¡rios Ãºnicos
- MÃ©tricas: passos, distÃ¢ncia, minutos ativos, calorias

## ğŸ“‹ DocumentaÃ§Ã£o Adicional

### ğŸ—ï¸ `architecture.md` - Diagramas TÃ©cnicos
- Fluxogramas do pipeline de dados
- RepresentaÃ§Ã£o visual das transformaÃ§Ãµes
- Mapeamento SOR â†’ SOT â†’ SPEC

### ğŸ“š `data_model.md` - EspecificaÃ§Ã£o Detalhada
- DefiniÃ§Ãµes completas de cada tabela
- Tipos de dados e constraints
- Relacionamentos e chaves primÃ¡rias

### ğŸ“„ `project_model_canvas_fitbit.md` - Planejamento do Projeto
- Contexto e problema a ser resolvido
- Objetivos de exploraÃ§Ã£o, prediÃ§Ã£o, explicabilidade e interatividade
- Plano de implementaÃ§Ã£o (sprints)

---

## ğŸ¯ PrÃ³ximos Passos

1. **ğŸ“– Leia**: [README.md](README.md) para setup completo
2. **â–¶ï¸ Execute**: `streamlit run app.py` para interface web
3. **ğŸ”§ Desenvolva**: Consulte documentaÃ§Ã£o tÃ©cnica para customizaÃ§Ãµes, novos modelos ou novas features
